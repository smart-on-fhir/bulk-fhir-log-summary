# Bulk FHIR Log Summary

This tool can read the bulk log files generated by
[bulk-data-client](https://github.com/smart-on-fhir/bulk-data-client)
(spec [here](https://github.com/smart-on-fhir/bulk-data-client/wiki/Bulk-Data-Export-Log-Items))
and present stats in a human readable way.

## Installation

1. Clone this repo.
2. Run `pip install -e .`

## Usage

- `bulk-fhir-log-summary example.ndjson`
- `bulk-fhir-log-summary --help`

## Example Output

```
┌────────────────┬──────────────────┐
│ Params:        │ _type: Condition │
│ Run:           │ 2 runs, averaged │
│ Count:         │ 97,117 (132MB)   │
│ Time/Resource: │ 7.9ms            │
│ Time/Megabyte: │ 5.8s             │
│ Total Time:    │ 12.8m            │
└────────────────┴──────────────────┘
┌────────────────┬───────────────────────────────────┐
│ Params:        │ _since: 2023-02-15T00:00:00+00:00 │
│                │ _type: Condition                  │
│ Run:           │ 05/17/23 16:59:45                 │
│ Count:         │ 46 (0MB)                          │
│ Time/Resource: │ 13.3s                             │
│ Time/Megabyte: │ 2.6h                              │
│ Total Time:    │ 10.2m                             │
└────────────────┴───────────────────────────────────┘
┌────────────────┬──────────────────────────────────────────────────────┐
│ Params:        │ _type: Condition,Encounter,MedicationRequest,Patient │
│ Run:           │ 05/15/23 19:47:13                                    │
│ Count:         │ 630,056 (2,703MB)                                    │
│ Time/Patient:  │ 1.3s (4,376 patients)                                │
│ Time/Resource: │ 8.8ms                                                │
│ Time/Megabyte: │ 2s                                                   │
│ Total Time:    │ 1.5h                                                 │
└────────────────┴──────────────────────────────────────────────────────┘
```

## Contributing

To use the same dev environment as us, you'll want to run these commands:
```sh
pip install -e .[dev]
pre-commit install
```

This will install the pre-commit hooks for the repo (which automatically enforce styling for you).
